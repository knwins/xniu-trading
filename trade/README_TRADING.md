# 🚀 实盘交易系统使用指南

## 📋 系统概述

本实盘交易系统基于回测表现最佳的**保守回撤控制策略**，具有以下特点：

- **回测表现**: 收益率 160.67%, 胜率 70.0%
- **实时数据**: 自动获取和处理市场数据
- **智能信号**: 基于技术指标的信号生成
- **风险控制**: 多层次风险管理机制
- **自动交易**: 全自动交易执行
- **实时监控**: 实时状态监控和报告

## 🛠️ 系统要求

### 环境要求
- Python 3.7+
- 稳定的网络连接
- 币安账户和API密钥
- 系统时区：香港时区 (Asia/Hong_Kong)

### 依赖包
```bash
pip install -r ../server/requirements.txt
```

## 🔑 API配置

### 1. 创建币安API密钥
1. 登录币安账户
2. 进入"API管理"
3. 创建新的API密钥
4. 确保开启以下权限：
   - 现货及杠杆交易
   - 合约交易
   - 读取信息

### 2. 安全设置
- 启用IP白名单
- 设置API密钥名称
- 保存好API密钥和密钥

## 🚀 快速开始

### 方法一：使用启动脚本（推荐）

```bash
python start.py
```

启动后按提示操作：
1. 选择"配置交易参数"
2. 输入API密钥和密钥
3. 设置交易参数
4. 选择"开始实盘交易"

### 方法二：直接运行

```bash
python trader.py
```

## ⚙️ 配置参数说明

### API配置
- `api_key`: 币安API密钥
- `secret_key`: 币安密钥
- `base_url`: API基础URL（默认：https://fapi.binance.com）

### 交易参数
- `symbol`: 交易对（默认：ETHUSDT）
- `initial_balance`: 初始资金（USDT）
- `max_position_size`: 最大仓位比例（0.1 = 10%）

### 风险控制
- `stop_loss_pct`: 止损比例（0.05 = 5%）
- `take_profit_pct`: 止盈比例（0.1 = 10%）
- `max_daily_loss`: 最大日亏损（0.1 = 10%）
- `max_drawdown`: 最大回撤（0.2 = 20%）

### 其他设置
- `signal_cooldown`: 信号冷却时间（秒）

## 📊 策略说明

### 保守回撤控制策略
基于回测表现最佳的策略，特点：

1. **趋势跟踪**: 识别市场趋势方向
2. **回撤控制**: 严格控制最大回撤
3. **动态止损**: 根据市场波动调整止损
4. **部分止盈**: 分段止盈，锁定利润
5. **仓位管理**: 根据信号强度调整仓位

### 信号生成
- **做多信号**: 趋势向上确认
- **做空信号**: 趋势向下确认
- **观望信号**: 市场方向不明确

## 🛡️ 风险控制机制

### 1. 止损机制
- 固定止损：价格达到止损线自动平仓
- 追踪止损：跟随价格移动止损线

### 2. 止盈机制
- 部分止盈：分段锁定利润
- 全部止盈：达到目标利润全部平仓

### 3. 资金管理
- 最大仓位限制
- 日亏损限制
- 最大回撤控制

### 4. 信号过滤
- 信号冷却时间
- 信号强度验证
- 市场状态检查

## 📈 监控和报告

### 实时状态
系统每分钟更新一次状态信息：
- 当前价格
- 账户余额
- 持仓情况
- 盈亏统计
- 交易次数和胜率

### 日志记录
- 交易日志：`logs/trading.log`
- 交易历史：`trade_history_YYYYMMDD_HHMMSS.json`
- 配置信息：`config/trading_config.json`

## ⚠️ 重要提醒

### 风险提示
1. **实盘交易存在风险**，可能导致资金损失
2. **建议先用小额资金测试**，熟悉系统后再增加资金
3. **定期检查系统状态**，确保正常运行
4. **保持网络稳定**，避免断线影响交易

### 安全建议
1. **保护API密钥**，不要泄露给他人
2. **定期更换API密钥**，提高安全性
3. **监控账户活动**，及时发现异常
4. **备份重要数据**，防止数据丢失

## 🔧 故障排除

### 常见问题

#### 1. API连接失败
- 检查网络连接
- 验证API密钥是否正确
- 确认API权限设置

#### 2. 下单失败
- 检查账户余额
- 确认交易对是否正确
- 验证下单参数

#### 3. 信号异常
- 检查数据源连接
- 验证策略参数
- 查看错误日志

### 日志分析
查看 `logs/trading.log` 文件，了解详细错误信息。

## 📞 技术支持

如遇到问题，请：
1. 查看日志文件
2. 检查配置参数
3. 确认网络连接
4. 联系技术支持

## 📝 更新日志

### v1.0.1 (2025-08-06)
- 初始版本发布
- 基于保守回撤控制策略
- 完整的风险控制机制
- 实时监控和报告功能
- 统一时区配置 (香港时区)

---

**免责声明**: 本系统仅供学习和研究使用，不构成投资建议。实盘交易存在风险，请谨慎操作。 